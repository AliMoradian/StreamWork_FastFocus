<?xml version="1.0" encoding="UTF-8" ?>
<Module> 
  <ModulePrefs title="DealersChoice">
    <Require feature="osapi" /> 
  </ModulePrefs> 
  <Content type="html">
    <![CDATA[


<div class=""></div>

<div class="dRetrievedInfo" style="height:300px;" >Loadin information. <br /> Please waite ...</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js" type="text/javascript"></script>
<script>
var str = "";
osapi.people.getViewer().execute(function(result) {
  str += "osapi.people.getViewer display name is " + result.displayName;
  str += "<br />osapi.people.getViewer id is " + result.id ;
  str += "<br />";
$(".dRetrievedInfo").html(str);
});

osapi.people.getOwner().execute(function(result) {
 str = $(".dRetrievedInfo").html();
  str += "<br/>osapi.people.getOwner display name is " + result.displayName;
  str += "<br />osapi.people.getOwner id is " + result.id ;
  str += "<br />";
$(".dRetrievedInfo").html(str);
});

osapi.people.getViewerFriends().execute(function(result) {
 str = $(".dRetrievedInfo").html();
  str += "<br/>osapi.people.getViewerFriends() #Friends" + result.totalResults;
  var friends = result.list;
  for (var i=0;i<friends.length;i++)
    str += "<br />osapi.people.getViewerFriends()  name:" + friends[i].displayName +" friend id:"+ friends[i].id;
  str += "<br />";
$(".dRetrievedInfo").html(str);
});

osapi.people.getOwnerFriends().execute(function(result) {
 str = $(".dRetrievedInfo").html();
  str += "<br/>osapi.people.getOwnerFriends() #Friends" + result.totalResults;
  var friends = result.list;
  for (var i=0;i<friends.length;i++)
    str += "<br />osapi.people.getOwnerFriends() name:" + friends[i].displayName +" friend id:"+ friends[i].id;
  str += "<br />";
$(".dRetrievedInfo").html(str);
});

osapi.activities.get({userId: '@viewer', groupId: '@friends', count: 20}).execute(function(result) {
  str = $(".dRetrievedInfo").html();
  if(!result.error)
  {
    var activities = result.list;
    for (var i=0;i<activities.length;i++)
      str += "<br />osapi.activities.get() activity ID: " + activities[i].title;
  }
  else{str += "<br /><span style='color:red'>Error occured while getting activites !!</span>";}
 str += "<br />";
$(".dRetrievedInfo").html(str);
});



    </script>
   ]]>
  </Content>
</Module>